{% extends 'base.html' %}

{% load humanize %}

{% block content %}

    <div class="col mx-5 mt-4 mb-5 wrap-content">

        <!-- Resource title -->

        <h4 class="my-4">{{ object.title }}</h4>

        <!-- Update and delete links -->

        <div class="mt-5 mb-4">

            {% if object.resource_type == "GLOSSARY" %}

                <h5 class="d-inline pe-2">用語集の詳細</h5>
                <small>
                    <a href="{% url 'glossary_update' object.pk %}">詳細を編集する</a> |
                    <a href="{% url 'resource_delete' object.pk %}">用語集を削除する</a>
                </small>

            {% else %}

                <h5 class="d-inline pe-2">翻訳の詳細</h5>
                <small>
                    <a href="{% url 'translation_update' object.pk %}">詳細を編集する</a> |
                    <a href="{% url 'resource_delete' object.pk %}">翻訳を削除する</a>
                </small>

            {% endif %}

        </div>

        <!-- Resource details table -->

        <div class="row justify-content-start">
            <div class="col-8">
                <table class="table table-bordered font-14">
                    <tbody class="table-body-bg">

                        <tr>
                            <td style="width: 25%">エントリー数:</td>
                            <td>{{ num_of_items|intcomma }}</td>
                        </tr>

                        {% if object.resource_type == "TRANSLATION" %}

                            <tr>
                                <td>翻訳者:</td>
                                {% if object.translator %}
                                    <td>{{ object.translator }}</td>
                                {% else %}
                                    <td>（なし）</td>
                                {% endif %}
                            </tr>

                            <tr>
                                <td>顧客:</td>
                                {% if object.client %}
                                    <td>{{ object.client }}</td>
                                {% else %}
                                    <td>（不明）</td>
                                {% endif %}
                            </tr>

                            <tr>
                                <td>分野:</td>
                                {% if object.field %}
                                    <td>{{ object.field }}</td>
                                {% else %}
                                    <td>（不明）</td>
                                {% endif %}
                            </tr>

                        {% endif %}

                        <tr>
                            <td>作成日時:</td>
                            {% if object.created_on %}
                                <td>{{ object.created_on }}</td>
                            {% else %}
                                <td>（不明）</td>
                            {% endif %}
                        </tr>

                        <tr>
                            <td>作成者:</td>
                            {% if object.created_by %}
                                <td>{{ object.created_by|title }}</td>
                            {% else %}
                                <td>（不明）</td>
                            {% endif %}
                        </tr>

                        <tr>
                            <td>備考:</td>
                            {% if object.notes %}
                                <td>{{ object.notes|linebreaksbr|urlizetrunc:50 }}</td>
                            {% else %}
                                <td>（なし）</td>
                            {% endif %}
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>

        <!-- Resource content table -->

        {% if num_of_items > 0 %}

            <!-- If resource has entries, display entries -->

            <div id="resource-content-table">

                <br>
                <div class="mb-4 ">
                    <h5 class="d-inline">
                        {% if object.resource_type == "TRANSLATION" %}
                            翻訳の内容
                        {% else %}
                            用語集の内容
                        {% endif %}
                    </h5>

                    {% if object.resource_type == "GLOSSARY" %}
                        <small class="ps-2">
                            <a href="{% url 'glossary_add_entry' glossary=object.pk %}?previous_url={{ request.get_full_path|urlencode }}">
                                エントリーを追加する
                            </a>
                        </small>
                    {% endif %}
                </div>

                <!-- Delete _glossary_content_table.html and _translation_content_table.html -->
                {% include "_resource_content_table.html" %}

            </div>

        {% else %}

            <!-- If no entries -->

            {% if object.resource_type == "GLOSSARY" %}

                <br>
                <p>
                    <a href="{% url 'glossary_add_entry' glossary=object.pk %}?previous_url={{ request.get_full_path|urlencode }}">
                        エントリーを追加する
                    </a>
                </p>

            {% endif %}

        {% endif %}

    </div>

{% endblock %}